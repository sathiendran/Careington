<div>
    <div class="col5-sm dialogbox dialogbox--new-appointment dialogbox--patient">
        <div class="dialogbox__titlebar">
            <span data-bind="text: vm_dialogTitle"></span>
            <!--  <ul class="pull-right dialogbox__titlecheck">
                 <li>Waive Fee:</li>
                 <li> <label>
                         <div class="checkbox">
                             <input type="checkbox">
                             <span class="checkbox__control"></span>
                         </div>
                         <span class="checkbox__title"></span>
                     </label>
                 </li>
             </ul> -->
        </div>
        <div class="dialogbox__sectionone">
            <div>
                <div data-bind="source: patientsSelector"
                     data-template="patient_itemSelector">
                </div>
                <div class="dialogbox__with"><span>with</span></div>
                <div class="dialogbox__owner" data-bind="css: {dialogbox__owner--is-opacity: isClinicianDisabled}">
                    <div class="userpic userpic--is-available" data-bind="events: {click: vm_onViewClinicianProfileClick}, css: { userpic--warning: isClinicianDisabled }">
                        <img data-bind="attr: { src: clinicianImageSource }" onerror="this.onerror=null;this.src='/images/default-user.jpg';">
                    </div>
                    <div class="dialogbox__userinfo">
                        <span class="dialogbox__name" data-bind="text: clinicianFullName"></span>
                        <!-- <span class="dialogbox__specialty" data-bind="text: clinician.medicalSpeciality"></span>
                        <span class="dialogbox__subspecialty" data-bind="text: clinician.subSpeciality"></span> -->
                    </div>
                </div>
                <div class="dialogbox__apptdetails dialogbox__apptdetails--rule" data-bind="css: {is-edited: isDateAreaInEditMode }">
                    <div class="dialogbox__sectionheader dialogbox__sectionheader--patient">
                        <span data-bind="text: vm_getDateAreaHeader">When</span>
                        <a href="#" class="js-edit-appt" data-bind="click: vm_onToggleEditDate, invisible: isReadOnly"><span data-bind="text: vm_getDateAreaActionLabel">Edit</span></a>
                    </div>

                    <div class="dialogbox__reschedule-appt" data-bind="visible: isDateAreaInEditMode">
                        <button type="button" class="button button__yellow js-cancel-appt" data-bind="click: vm_onCancelEditDate">Cancel</button>

                        <div class="dialogbox__datepicker">
                            <label>Appt. Date</label>
                            <input data-role="datepicker" data-bind="value: startDate, events: {change: vm_startDateChange}, min: vm_currentDate" />
                        </div>
                        <div class="dialogbox__appt-times" data-bind="source: apptsSlotsTray, events: {change: vm_appointmentSlotsChanged}" data-template="patient_apptsSlotsTemplate">
                        </div>
                    </div>

                    <div class="dialogbox__when"  data-bind="invisible: isDateAreaInEditMode">
                        <div class="dialogbox__time">
                            <span class="dialogbox__hour" data-bind="html: vm_getStartTime"></span>
                            <spoan class="dialogbox__timezone" data-bind="text: timezone">pst</spoan>
                        </div>

                        <div class="dialogbox__fulldate" data-bind="text: vm_getStartDate"></div>
                    </div>

                </div>
            </div>

        </div>
        <div class="dialogbox__sectiontwo">
            <div class="dialogbox__sectionheader"><span>Reason(s) for Appointment</span></div>
            <ul class="dialogbox__appt-reasons dialogbox__appt-reasons--no-dropdwn" data-bind="visible: isReadOnly">
                <li>
                    <span data-bind="text: primaryConcernOtherText"></span>
                </li>
                <li data-bind="visible: displaySecondaryConcern">
                    <span data-bind="text: secondaryConcernOtherText"></span>
                </li>
            </ul>
            <ul class="dialogbox__appt-reasons" data-bind="invisible: isReadOnly">
                <li>
                    <select class="dialogbox__reason-dropdown"
                            data-role="dropdownlist"
                            data-option-label="Primary Concern/Reason"
                            data-value-primitive="true"
                            data-text-field="text"
                            data-value-field="codeId"
                            data-bind="
                        value: vm_primaryConsernId,
                        source: dataPrimaryConcernList,
                        events: { change: vm_onPrimaryConcernChange }"></select>

                    <div class="other-textarea dialogbox__other"
                         data-bind="visible: vm_isPrimaryConcernOtherSelected">
                        <textarea data-value-update="keyup"
                                  data-bind="
                            value: primaryConcernOtherText,
                            events: { keyup: vm_onPrimaryConcernChange }"></textarea>
                    </div>
                </li>

                <li data-bind="visible: displaySecondaryConcern">
                    <select class="dialogbox__reason-dropdown"
                            data-role="dropdownlist"
                            data-option-label="Secondary Concern/Reason"
                            data-value-primitive="true"
                            data-text-field="text"
                            data-value-field="codeId"
                            data-bind="
                        value: vm_secondaryConsernId,
                        source: dataSecondaryConcernList,
                        events: { change: vm_onSecondaryConcernChange }"></select>

                    <div class="other-textarea dialogbox__other"
                         data-bind="visible: vm_isSecondaryConcernOtherSelected">
                        <textarea data-value-update="keyup"
                                  data-bind="
                            value: secondaryConcernOtherText,
                            events: { keyup: vm_onSecondaryConcernChange }"></textarea>
                    </div>
                    <span class="icon_circle-with-minus" data-bind="events: {click: vm_onRemoveSecondaryConcernClick}"></span>
                </li>
            </ul>

            <a class="dialogbox__add-concern" data-bind="events: {click: vm_onAddConcernClick}, visible: vm_isAddConcernButtonVisible" href="\\#">
                <span class="icon_circle-with-plus"></span> Add a concern
            </a>
            <div class="dialogbox__sectionheader dialogbox__sectionheader--locked">
                <span>Additional Notes</span>
                <span class="icon_lock-open" style="display:none;"></span>
                <span style="display:none;">Make Private</span>
            </div>
            <textarea id="editor" rows="10" cols="30" data-role="editor"
                      data-bind="value: additionalNotes, 
                      invisible: isReadOnly"
                      data-resizable="false"
                      data-tools="['bold',
                           'italic',
                           'underline',
                           'strikethrough',
                           'justifyLeft',
                           'justifyCenter',
                           'justifyRight',
                           'justifyFull']"></textarea>
            <div class="textarea" data-bind="html: additionalNotes, visible: isReadOnly"></div>
        </div>
        <div class="dialogbox__buttons">
            <a href="#" data-bind="events: { click: vm_onCloseClick }">Close</a>
            <ul data-bind="invisible: isReadOnly">
                <li><button class="button button__red" data-bind="visible: vm_isCancelButtonVisible, events: { click: vm_onRemoveClick }"><span>Remove</span></button></li>
                <li>
                    <button class="button button__green" data-bind="
                    events: { click: vm_onSubmitClick },
                    disabled: isDisabled,
                    css: { is-loading: isLoading, button__red: isError, error: isError, button__green: vm_isNotError, button__gray: isDisabled }">
                        <span>Save</span>
                    </button>
                </li>
            </ul>
        </div>
    </div>
</div>

<script id="patient_itemSelector_item" type="text/x-kendo-template">
    <li data-bind="css: { is-active: isSelected}, events: {click : onSelectClick}">
        <div class="userpic" data-bind="events: {click: onViewProfileClick}, css: { default-user :isDefault}">
            <img data-bind="attr: { src: imageSource }" onerror="this.onerror=null;this.src='/images/default-user.jpg';">
        </div>
        <div class="dialogbox__userinfo">
            <span class="dialogbox__name" data-bind="text: name"></span>
            <span class="dialogbox__phone" data-bind="text: info"></span>
        </div>
    </li>
</script>
<script id="patient_itemSelector_selectedItem" type="text/x-kendo-template">
    <div class="dialogbox__owner" data-bind="css: {dialogbox__owner--is-opacity: isDisabled}">
        <div class="userpic" data-bind="events: {click: onViewProfileClick}, css: { default-user : isDefault, userpic--warning: isDisabled }">
            <img data-bind="attr: { src: imageSource }" onerror="this.onerror=null;this.src='/images/default-user.jpg';">
        </div>
        <div class="dialogbox__userinfo">
            <span class="dialogbox__name" data-bind="text: name"></span>
            <span class="dialogbox__specialty" data-bind="text: info"></span>
        </div>
        <span class="icon_chevron-with-circle-right" data-bind="invisible: isSelectorLocked"></span>
        <div>
</script>

<script id="scrollableItem" type="text/x-kendo-template">
    <tr class="k-grid-edit-row" data-bind="events: {click : onSelectClick}, visible: vm_isVisible ">
        <td>
           <div class="dialogbox__usertray-item" 
                data-bind = "css: { is-active: isSelected }">
               <div class="userpic" data-bind="events: {click: onViewProfileClick}, css: { default-user : isDefault }">
                    <img data-bind="attr: { src: imageSource }" onerror="this.onerror=null;this.src='/images/default-user.jpg';">
                </div>
                <div class="dialogbox__userinfo">
                    <span class="dialogbox__name" data-bind="text: name"></span>
                    <span class="dialogbox__specialty" data-bind="text: info, attr: {title: info}"></span>
                </div>
           </div>
        </td>
   </tr>
</script>

<script id="patient_itemSelector" type="text/x-kendo-template">
    <div>
        <!-- This div necessary for kendo template engine -->
        <div data-bind="source: vm_getSelectedItemOrDefault, events: {click: vm_openItemsSelector}"
             data-template="patient_itemSelector_selectedItem">
        </div>
        <div class="dialogbox__usertray" data-bind="css: {is-active: isItemsSelectorVisible, is-loading: vm_isItemsLoading}">
            <div class="dialogbox__titlebar dialogbox__titlebar--usertray">
                <span class="titlebar__title">Who is this availability for?</span>
                <a href="\\#" data-bind="events: {click: vm_hideItemsSelector}"><span>Done</span></a>
            </div>
            <div class="search">
                <span class="icon_magnifying-glass"></span>
                <input type="text" placeholder="Search By Name"
                       data-bind="events: { keyup: vm_nameFilterChange }, value: nameFilter"
                       data-value-update="keyup">
            </div>
            <div class="dialogbox__selected-item-list" data-bind="class: {is-active: vm_isSelectedItemsListNotEmpty}">
                <div
                    style= "max-height: 72px"
                    class="dialogbox__unselected-items"
                    data-role="grid"
                    data-editable="false"
                    data-bind="source: vm_getSelectedItems"
                    data-row-template="scrollableItem"
                    data-scrollable= "false"
                ></div>    

                <div class="dialogbox__unselected-items"
                    data-role="grid"
                    data-editable="false"
                    data-scrollable= "{ virtual: true }"
                    data-bind="source: ds, invisible: vm_isItemsListEmpty"
                    data-row-template="scrollableItem"
                ></div>

                <div class="dialogbox__empty-state" data-bind="visible: vm_isItemsListEmpty">
                    <span class="icon_user"></span>
                    <p data-bind="text: vm_getItemsListEmptyNotification"></p>
                </div>
            </div>
        </div>
    </div>
</script>
<script id="patient_apptsSlotsTemplate" type="text/x-kendo-template">
    <div class="drawer-card__slider js-footer-slider"
        data-bind="source: vm_slots"
        data-template="patient_apptSlotTemplate"></div>
</script>


<script id="patient_apptSlotTemplate" type="text/x-kendo-template">
    <div data-bind = "css: { is-selected : vm_isInvisible" >
        <button type="button" class="drawer-card__appointment-action" data-bind="events: {click: vm_onSlotClick }, text: formatedTime" ></button>
    </div>
</script>

