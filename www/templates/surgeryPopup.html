<div class="modal">
   <ion-view  title="Prior Surgery" cache-view="false">
       <form>
        <header class="bar bar-header bar-dark concernListHeader" style="{{PrimaryConcernPopupH}}; background-color:{{brandColor}};border-color:{{brandColor}};{{backgroundimage}};">
           <div class="ErrorMessage ErrorMessageDiv"  ></div>
           <button class="button button-clear {{concernListDoneStyle}}" style="{{PriorSurgeryPopupCancel}};font-size: 18px !important;" ng-click="RemoveSurgeryPopup()">Done</button>
           <h1 class="title {{concernListTitleStyle}}" style="{{PrimaryConcernPopupTitle}}; ">Prior Surgeries</h1>
           <button type="submit" ng-show="showIntakeNewSurgeryAdd" class="button button-clear surgeryTopAddButton {{concernListDoneStyle}}" style="{{PrimaryConcernPopupDone}};font-size: 18px !important;" ng-click="closeSurgeryPopup()" >Add</button>
           <button type="submit" ng-show="showIntakeEditSurgery" class="button button-clear surgeryTopAddButton {{concernListDoneStyle}}" style="{{PrimaryConcernPopupDone}};font-size: 18px !important;" ng-click="EditIntakeSurgeryItem()" >Save</button>
        </header>
          <ion-content has-header="true" class="concernListContent">
             <div class="list" style="margin-top: 10px;" >
              <div class="item item-button-right" href="#" ng-repeat="surgery in patientSurgeriess" ng-if="patientSurgeriess.length > 0" style="overflow: inherit; padding: 0px; border: none;">
                     <div class="surDisplay surgeryDisplay-{{$index}}" >
                        <div class="surDescription">
                             <h2 class="regularfamily">{{surgery.Name}}</h2>
                             <p>{{surgery.Date | date: "MMMM, yyyy"}}</p>
                      </div>
                     <a class="button surEditIcon" ng-click="openEditSurgeryItem({{$index}}, surgery);" ><i class="currentedit" ng-bind-html="drawSVGCIcon('pencil')"></i></a>
                     </div>

                     <div class="surgeryEdit-{{$index}} animated slideInRight" style="display: none;">
                          <div class="item item-input validated" style="border-left: none; border-right: none;">
                               <span class="input-label priorTag">Procedure</span>
                               <input type="text"  name="surDescription[]" id="surDescription_{{$index}}"  value="{{surgery.Name}}"  placeholder="Short description" class="priorValue" >
                               <a class="surgeryCloseIcon" ng-click="removeSurgeryItem({{$index}});" ><i class="ion-trash-b" ></i></a>
                          </div>
                          <div class="item item-input validated" style="border-left: none; border-right: none;">
                             <span class="input-label priorTag">Date</span>
                             <select id="surDateStringMonth_{{$index}}"  name="surDateStringMonth[]" class="surgeryMonth">
                                <option ng-repeat="month in EditSurgerymonthsList" value="{{month.value}}" ng-selected="month.value == surgery.Date.getMonth()+1">
                                   <b><span class="priorValueDate">{{month.text}}</span></b>
                                </option>
                             </select>
                             /&nbsp;
                             <select id="dateStringYear_{{$index}}" name="dateStringYear"  class="surgeryYear" >
                                <option ng-repeat="surgeryYear in surgeryYearsList" value="{{surgeryYear.value}}" ng-selected="surgeryYear.text === surgery.Date.getFullYear()">
                                   <b><span class="priorValueDate">{{surgeryYear.text }}</span></b>
                                </option>
                             </select>
                          </div>
                     </div>
                </div>
             </div>
             <ion-list>
                <div ng-show="showIntakeNewSurgeryAdd" class="list" style="padding-bottom: 0px !important; {{PriorSurgeryPopupTextBox}}">
                   <!--<h5 class="surname">Add New Surgery</h5>-->
                   <div class="item item-input validated">
                        <span class="input-label priorTag">Procedure</span>
                        <input type="text" value=""  placeholder="Short description" ng-model="surgery.name" name="name" id="name" class="priorValue">
                       <!-- <a class="surgeryCloseIcon" ng-click="backtoSurgeryView();"><i class="ion-close" ></i></a>-->
                       <a class="surCloseIcon" ng-click="backtoSurgeryView();" ><i style="font-size: 24px;"  ng-bind-html="drawSVGCIcon('cross');"></i></a>
                     </div>
                   <div class="item item-input validated">
                      <span class="input-label priorTag">Date</span>
                      <select id="dateStringMonth" name="dateStringMonth" ng-model="surgery.dateStringMonth" class="surgeryMonth" >
                         <option ng-repeat="month in monthsList" value="{{month.value}}" ng-selected="{{month.selected}}">
                            <b><span class="priorValueDate">{{month.text}}</span></b>
                         </option>
                      </select>
                      /&nbsp;
                      <select id="dateStringYear" name="dateStringYear[]" ng-model="surgery.dateStringYear" class="surgeryYear" >
                         <option ng-repeat="surgeryYear in surgeryYearsList" value="{{surgeryYear.value}}">
                            <b><span class="priorValueDate">{{surgeryYear.text }}</span></b>
                         </option>
                      </select>
                   </div>
                </div>
             </ion-list>
             <div class="noSurgeryText" ng-if="patientSurgeriess.length == 3" style="padding-top: 30px;">
               <p>You can include up to three surgeries in your health history.</p>
             </div>
             <div class="noSurgeryText" ng-if="patientSurgeriess.length == 0" ng-hide="showIntakeNewSurgeryAdd">
               <p>No surgeries are included in your health history.</p>
             </div>
          </ion-content>

          <ion-footer-bar  class="bar bar-footer footer healthSurgeryBottom" hide-on-keyboard="true" >
               <button ng-if="patientSurgeriess.length < 3" type="submit" class="button surgeryAddButton" ng-click="showNewSurgeryAddScreen();" ng-hide="showIntakeNewSurgeryAdd || showIntakeEditSurgery" >
               Add a surgery
               </button>
        </ion-footer-bar>
      </form>
   </ion-view>
</div>
